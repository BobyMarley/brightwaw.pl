# üî• –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º Firebase

## –ü—Ä–æ–±–ª–µ–º–∞: INTERNAL ASSERTION FAILED

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ Firebase Firestore –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `onSnapshot` –∏ `serverTimestamp`.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. –ó–∞–º–µ–Ω–∏–ª `onSnapshot` –Ω–∞ `getDocs`
- –£–±—Ä–∞–ª —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –î–æ–±–∞–≤–∏–ª –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–∏–ª —Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### 2. –ó–∞–º–µ–Ω–∏–ª `serverTimestamp()` –Ω–∞ `new Date().toISOString()`
- –£–±—Ä–∞–ª —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É—é –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –≤—Ä–µ–º—è

### 3. –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- Try/catch –±–ª–æ–∫–∏
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## üîß –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±–Ω–æ–≤–∏—Ç—å Firebase
```bash
npm update firebase
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
```bash
npm run build
# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ Firebase
–í Firebase Console ‚Üí Firestore ‚Üí Rules:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true; // –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    }
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
–í Firebase Console ‚Üí Firestore ‚Üí Indexes
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è `workers` –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—é `name`

## üéØ –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö